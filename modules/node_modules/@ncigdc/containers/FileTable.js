/* @flow */

import Relay from 'react-relay';
import SearchTable from '@ncigdc/components/SearchTable';

export const FileTableQuery = {
  fragments: {
    hits: () => Relay.QL`
      fragment on FileConnection {
        total
        edges {
          node {
            id
            file_id
            file_name
            file_size
            access
            data_category
            data_format
            platform
            submitter_id
            experimental_strategy
            data_type
            cases {
              hits(first: 1) {
                total
                edges {
                  node {
                    case_id
                    project {
                      project_id
                    }
                  }
                }
              }
            }
            annotations {
              hits(first:20) {
                total
                edges {
                  node {
                    annotation_id
                  }
                }
              }
            }
          }
        }
      }
    `,
  },
};

const FileTable = Relay.createContainer(
  SearchTable,
  FileTableQuery
);

export default FileTable;
