// @flow
import React from 'react';
import { lifecycle, compose } from 'recompose';

import withRouter from '@ncigdc/utils/withRouter';
import { scrollToId } from '@ncigdc/utils/deepLink';

const enhance = compose(
  withRouter,
  lifecycle({
    componentDidMount(): void {
      const { name, location } = this.props;
      const currentHash = (location.hash || '').replace(/^#/, '');
      if (currentHash === name) scrollToId(name);
    },
  })
);

const Deeplink = ({ name, children }: { name: string, children: any }) => <a name={name} id={name}>{children}</a>;

export default enhance(Deeplink);
