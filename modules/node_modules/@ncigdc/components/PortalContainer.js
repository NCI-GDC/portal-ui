// @flow

import React from 'react';
import { connect } from 'react-redux';
import Match from 'react-router/Match';

import RepositoryRoute from '@ncigdc/routes/RepositoryRoute';
import CohortRoute from '@ncigdc/routes/CohortRoute';
import ProjectsRoute from '@ncigdc/routes/ProjectsRoute';
import AnnotationsRoute from '@ncigdc/routes/AnnotationsRoute';
import ProjectRoute from '@ncigdc/routes/ProjectRoute';
import FileRoute from '@ncigdc/routes/FileRoute';
import CaseRoute from '@ncigdc/routes/CaseRoute';
import AnnotationRoute from '@ncigdc/routes/AnnotationRoute';
import CartRoute from '@ncigdc/routes/CartRoute';
import HomeRoute from '@ncigdc/routes/HomeRoute';
import GeneRoute from '@ncigdc/routes/GeneRoute';
import SSMRoute from '@ncigdc/routes/SSMRoute';

import Header from '@ncigdc/components/Header';
import Footer from '@ncigdc/components/Footer';
import SmartSearch from '@ncigdc/components/SmartSearch';
import NotificationContainer from '@ncigdc/components/NotificationContainer';
import RelayLoadingContainer from '@ncigdc/components/RelayLoadingContainer';
import ModalContainer from '@ncigdc/components/ModalContainer';

import { GlobalTooltip } from '@ncigdc/uikit/Tooltip';

const PortalContainer = ({ notifications }) => (
  <div style={{ position: 'relative', minHeight: '100vh' }}>
    <Header />
    <div style={{ 
        paddingTop: `calc(51px + ${(notifications.filter(n => !n.dismissed).length) * 40}px)`,
        paddingBottom: `120px`,
        transition: `padding 0.25s ease`,
      }}>
      <Match exactly pattern="/" component={HomeRoute} />
      <Match exactly pattern="/cart" component={CartRoute} />
      <Match exactly pattern="/repository" component={RepositoryRoute} />
      <Match exactly pattern="/cohort" component={CohortRoute} />
      <Match exactly pattern="/projects" component={ProjectsRoute} />
      <Match exactly pattern="/annotations" component={AnnotationsRoute} />
      <Match exactly pattern="/query" component={SmartSearch} />
      <Match pattern="/projects/:id" component={ProjectRoute} />
      <Match pattern="/files/:id" component={FileRoute} />
      <Match pattern="/cases/:id" component={CaseRoute} />
      <Match pattern="/annotations/:id" component={AnnotationRoute} />
      <Match pattern="/genes/:id" component={GeneRoute} />
      <Match pattern="/ssms/:id" component={SSMRoute} />
    </div>
    <Footer />

    <RelayLoadingContainer />
    <NotificationContainer />
    <ModalContainer />
    <GlobalTooltip />
  </div>
 );

 export default connect(store => ({notifications: store.bannerNotification}))(PortalContainer);