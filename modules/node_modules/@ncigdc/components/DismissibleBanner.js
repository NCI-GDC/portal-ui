// @flow

import React from 'react';
import { connect } from 'react-redux';
import Row from '@ncigdc/uikit/Flex/Row';
import Button from '@ncigdc/uikit/Button';

import { setModal } from '@ncigdc/dux/modal';
import { dismissBanner } from '@ncigdc/dux/dismissBanner';

const DismissibleBanner = ({ dispatch, isBannerDismissed }) => (
  <Row 
    className={isBannerDismissed ? 'header-banner dismissed' : 'header-banner'}
  >
    <span className="fa fa-question icon" />
    <span style={{ flex: 32 }}>
      <strong>Can't find your data?</strong>
      <span
        className="header-banner-link"
        onClick={() => dispatch(setModal(
          <div
            style={{
              position: 'relative',
            }}
          >
            <h2 className="banner-title">
              Can't find your data?
              <span className="banner-title-link">
                You may be looking for the <a href="https://gdc-portal.nci.nih.gov/legacy-archive/search/f" target="_blank">GDC Legacy Archive</a>.
              </span>
            </h2>
            <div>
              Data in the GDC Data Portal has been harmonized using GDC Bioinformatics Pipelines whereas data in the
              GDC Legacy Archive is an unmodified copy of data that was previously stored in CGHub and in the TCGA Data Portal hosted by the TCGA Data Coordinating Center (DCC).
              Certain previously available data types and formats are not currently supported by the GDC Data Portal and are only distributed via the GDC Legacy Archive.
              <br />
              <br />
              Check the <a href="https://gdc-docs.nci.nih.gov/Data/Release_Notes/Data_Release_Notes/" target="_blank">Data Release Notes</a> for additional details.
            </div>
            <Button
              style={{
                position: 'absolute',
                right: '0',
                bottom: '0',
              }}
              onClick={() => dispatch(setModal(null))}
            >
              <span>OK</span>
            </Button>
          </div>
        ))}
      >
        Click here for more information.
      </span>
    </span>
    <span
      className="header-banner-dismiss"
      onClick={() => dispatch(dismissBanner())}
    >
      Dismiss <span className="fa fa-close" aria-hidden="true" />
    </span>

  </Row>
);

export default connect(state => state.dismissBanner)(DismissibleBanner);
