// @flow

import React from 'react';
import { compose, withState, withProps } from 'recompose';
import { Editor, EditorState } from 'draft-js';

import { Row, Column } from '@ncigdc/uikit/Flex';
import Button from '@ncigdc/uikit/Button';

import RepositoryLink from '@ncigdc/components/Links/RepositoryLink';

const initialState = {
  editorState: EditorState.createEmpty(),
};

// SmartSearch
export default
compose(
  withState('state', 'setState', initialState),
  withProps({
    onChange: (editorState, props) => {
      console.log(editorState);
      props.setState(() => ({ editorState }));
    },
  })
)(({ state, ...props }) => (
  <Column style={{ alignItems: 'center' }}>
    <Column style={{ backgroundColor: 'white', width: '1000px', marginTop: '2rem' }}>
      <Row style={{ padding: '1rem', alignItems: 'center', borderBottom: '1px solid rgb(203, 203, 203)' }}>
        <span>Valid Query</span>
        <Row style={{ marginLeft: 'auto' }}>
          <RepositoryLink>
            <Button leftIcon={<i className="fa fa-reply-all" />}>
              Back to Facet Search
            </Button>
          </RepositoryLink>
        </Row>
      </Row>
      <Column style={{ padding: '1rem' }}>
        <Editor
          placeholder="Start Typing Your Query..."
          editorState={state.editorState}
          onChange={e => props.onChange(e, props)}
        />
      </Column>
    </Column>
  </Column>
));
